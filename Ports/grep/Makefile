ifeq ($(RUDIX_ENABLE_NLS),yes)
BuildRequires += $(LibDir)/libintl.la
endif
BuildRequires += $(BinDir)/xz

include ../../Library/Config.mk
include ../../Library/Rudix.mk
include ../../Library/GNUFormula.mk

Title=		GNU Grep
Name=		grep
Version=	2.11
Revision=	0
URL=		http://ftp.gnu.org/gnu/grep/
Source=		$(Name)-$(Version).tar.xz

ReadMeFile=	$(SourceDir)/README
LicenseFile=	$(SourceDir)/COPYING

ifeq ($(RUDIX_BUILD_WITH_STATIC_LIBS),yes)
LdFlags += /usr/local/lib/libintl.a -liconv -framework CoreFoundation
define prep_post_hook
perl -p -i -e s/'intl '//g $(SourceDir)/configure
endef
endif

GnuConfigureExtra += --program-prefix=gnu

define install_post_hook
./links.sh $(InstallDir)$(BinDir)
./links.sh $(InstallDir)$(Prefix)/share/man/man1
cd $(InstallDir)$(Prefix)/share/info ; ln -sf grep.info gnugrep.info
endef

define explode
xzcat $(Source) | tar -xf -
endef
